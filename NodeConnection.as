package  {	import flash.events.Event;	import flash.events.IOErrorEvent;	import flash.net.XMLSocket;			public class NodeConnection {				public  var server:String = "http://battleshits.jit.su";		public  var port:int = 8080;		private var socket:XMLSocket;		private var passphrase:String = "";				public function MapGenerator() {						socket = new XMLSocket(server, port);        		socket.addEventListener(Event.CONNECT, onConnect);      		socket.addEventListener(IOErrorEvent.IO_ERROR, onError); 					}		// Public API //////////////////////////////////////////////////////////		public function isReady():Boolean {			return socket.connected;		}		public function sendBombardierDetails(n:String, m:String, t:int):void {			var details:Object = {				name: n,				email: m,				target: t,				passphrase: passphrase			};			socket.send(details);		}		// Socket Connection ///////////////////////////////////////////////////		private function onConnect(e:Event):void {			trace("=== Connection to Node server established!");			// TODO Add some kind of handshake to make sure only our client is /			/////// sending out email via our server ///////////////////////////		}		private function onError(e:IOErrorEvent):void {			trace("=== Connection to Node server failed :<");			// TODO Display something on screen ////////////////////////////////			// TODO Set up Timer and try again with given credentials //////////		}			}	}