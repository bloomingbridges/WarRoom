package {	import flash.display.Stage;	import flash.display.StageDisplayState;	import flash.display.StageScaleMode;		import flash.display.Sprite;	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;		public class WarRoom extends Sprite {				public static const FULL_WIDTH  = 1280;		public static const FULL_HEIGHT = 960;		public static const HALF_WIDTH  = 640;		public static const HALF_HEIGHT = 480;		private const WAITING   = 0;		private const LOCKED    = 1;		private const LAUNCHING = 2;		private var state:int;		private var map:MapGenerator;		private var prompt:Prompt;				public function WarRoom() {						map = new MapGenerator(2);			addChild(map);			stage.displayState = StageDisplayState.FULL_SCREEN;			stage.scaleMode = StageScaleMode.NO_SCALE;			stage.addEventListener(KeyboardEvent.KEY_UP, onBuzzerPress);		}		private function onBuzzerPress(e:KeyboardEvent):void {			switch (state) {				case WAITING:					var target:Point = map.lockDownCurrentPosition();					showPrompt();					stage.focus = prompt.input;					goState(LOCKED);					break;				case LOCKED:					if (e.keyCode === Keyboard.ENTER) {						map.unlock();						removeChild(prompt);						goState(LAUNCHING);					}					// Listen for ESC key presses					if (e.keyCode === Keyboard.ESCAPE) {						map.unlock();						removeChild(prompt);						goState(WAITING);					}					break;			}		}		private function showPrompt(pW:int = 100, pH:int = 18):void {			prompt = new Prompt(pW, pH, map.getBlockProperties());			//prompt.alpha = 0.8;			addChild(prompt);		}		private function goState(s:int):void {			state = s;			trace("=== State is now: " + state);		}	}	}