package node {	import flash.events.Event;	import flash.events.IOErrorEvent;	import flash.net.XMLSocket;			public class NodeConnection {				public  var server:String = "localhost";		public  var port:int = 6666;		private var socket:XMLSocket;		private var passphrase:String = "";				public function NodeConnection() {						socket = new XMLSocket(server, port);        		socket.addEventListener(Event.CONNECT, onConnect);      		socket.addEventListener(IOErrorEvent.IO_ERROR, onError); 					}		// Public API //////////////////////////////////////////////////////////		public function isReady():Boolean {			return socket.connected;		}		public function sendBombardierDetails(address:String, population:int, time:int):void {			var details:Object = {				email: address,				impact: population,				arrival: time, 				passphrase: passphrase			};			var json:String = JSON.stringify(details);			trace(json);			socket.send(json);		}		// Socket Connection ///////////////////////////////////////////////////		private function onConnect(e:Event):void {			trace("=== Connection to Node server established!");			// TODO Add some kind of handshake to make sure only our client is /			/////// sending out email via our server ///////////////////////////		}		private function onError(e:IOErrorEvent):void {			trace("=== Connection to Node server failed :<");			// TODO Display something on screen ////////////////////////////////			// TODO Set up Timer and try again with given credentials //////////		}			}	}